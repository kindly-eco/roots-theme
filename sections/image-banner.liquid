{{ 'section-image-banner.css' | asset_url | stylesheet_tag }}
{{ 'component-signpost.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign hero_background_image = section.settings.image_large | img_url: '1600x' | prepend: "'" | append: "'"
-%}

{%- style -%}
:root {
  --hero-background-image: url({{ hero_background_image }});
  --hero-box-opacity: {{ section.settings.box_opacity }}%;
  --hero-overlay-opacity: {{ section.settings.overlay_opacity }}%;
}
{%- endstyle -%}

<div class="image-banner-inner {{ section.settings.layout }}{% if hero_background_image == blank %}{% else %} background-image{% endif %}">
  {%- if section.settings.image_small != blank -%}
    <img
      src="{{ section.settings.image_small | img_url: '900x' }}"
      alt="{{ section.settings.image_small.alt }}"
      width="900"
      height="600"
      loading="lazy"
    />
  {%- else -%}
    {{ "lifestyle-2" | placeholder_svg_tag: "placeholder-svg" }}
  {%- endif -%}

  <div class="{%- if section.settings.text_invert == true -%} text-invert{%- endif -%}">
    {%- if section.settings.heading != blank -%}
      <{{ section.settings.heading_type }}>
        {{ section.settings.heading | escape }}
      </{{ section.settings.heading_type }}>
    {%- endif -%}
    {%- if section.settings.text != blank -%}
      <p class="lede">{{ section.settings.text }}</p>
    {%- endif -%}
    {%- if section.settings.cta_text != blank -%}
      <p class="signpost">
        <a href="{{ section.settings.cta_url }}" {% if section.settings.cta_style %}class="prominent"{% endif %}>
          <span>{{ section.settings.cta_text }}</span>
          <svg width="23" height="16" viewBox="0 0 23 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 7.229V8.77h20.155l-5.908 6.137L15.297 16 23 8l-7.703-8-1.05 1.091 5.908 6.138H0Z" fill="currentColor"></path>
          </svg>
        </a>
      </p>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Image banner",
  "tag": "section",
  "class": "image-banner",
  "settings": [
    {
      "id": "heading",
      "type": "text",
      "label": "Heading",
      "default": "Add a title"
      },
      {
        "type": "select",
        "id": "heading_type",
        "label": "Choose heading type",
        "info": "Important for SEO. If banner position is top of the page, choose heading 1. If position is further down the page, choose heading 2 or 3",
        "default": "h2",
        "options": [
          {
            "value": "h1",
            "label": "Heading 1"
          },
          {
            "value": "h2",
            "label": "Heading 2"
          },
          {
            "value": "h3",
            "label": "Heading 3"
          }
        ]
      },
      {
        "id": "text",
        "type": "text",
        "label": "Text",
        "default": "Add descriptive text"
      },
      {
        "type": "text",
        "id": "cta_text",
        "label": "Link text",
        "info": "Optional"
      },
      {
        "type": "url",
        "id": "cta_url",
        "label": "Link URL",
        "info": "Optional"
      },
      {
        "type": "checkbox",
        "id": "cta_style",
        "label": "Add prominence to link",
        "default": false
      },
      {
        "type": "header",
        "content": "On large screens"
      },
      {
        "id": "image_large",
        "type": "image_picker",
        "label": "Large hero image"
      },
      {
        "type": "range",
        "id": "overlay_opacity",
        "label": "Darken hero image",
        "min": 0,
        "max": 100,
        "step": 5,
        "default": 10
      },
      {
        "type": "select",
        "id": "layout",
        "label": "Text box position",
        "default": "content-center",
        "options": [
          {
            "value": "content-left",
            "label": "Left"
          },
          {
            "value": "content-center",
            "label": "Center"
          },
          {
            "value": "content-right",
            "label": "Right"
          }
        ]
      },
      {
        "type": "range",
        "id": "box_opacity",
        "label": "Text box opacity",
        "min": 0,
        "max": 100,
        "step": 5,
        "default": 80
      },
      {
        "type": "checkbox",
        "id": "text_invert",
        "label": "Invert text color",
        "default": false
      },
      {
        "type": "header",
        "content": "On small screens"
      },
      {
        "id": "image_small",
        "type": "image_picker",
        "label": "Small hero image"
      }
  ],
  "presets": [
    {
      "name": "Image banner"
    }
  ]
}
{% endschema %}
